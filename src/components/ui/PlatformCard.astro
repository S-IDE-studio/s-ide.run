---
/**
 * PlatformCard component for download page
 * Displays platform download information with icon, title, and download button
 */
interface Props {
  name: string;
  shortName?: string;
  description: string;
  downloadUrl: string;
  fileSize?: string;
  buttonLabel?: string;
  isAvailable?: boolean;
  isComingSoon?: boolean;
  icon?: string;
}

const {
  name,
  shortName,
  description,
  downloadUrl,
  fileSize,
  buttonLabel = 'Download',
  isAvailable = true,
  isComingSoon = false,
  icon,
} = Astro.props;

const computedShortName = shortName ?? name;
const iconDisplay = icon ?? computedShortName.toUpperCase();
const sizeDisplay = fileSize ? `(${fileSize})` : '';
const containerClass = isComingSoon
  ? 'flex flex-col platform-card platform-card-coming-soon'
  : 'flex flex-col platform-card';
const innerDivStyle = isComingSoon ? 'gap: 16px; height: 100%;' : 'gap: 16px;';
---

<article class={containerClass}>
  <div class={containerClass} style={innerDivStyle}>
    {isComingSoon ? (
      <>
        <div class="platform-card-icon-large" aria-hidden="true">{iconDisplay}</div>
        <div>
          <h2 class="platform-card-title">{name}</h2>
          <p class="platform-card-coming-soon-text">Coming Soon</p>
        </div>
      </>
    ) : (
      <>
        <div class="flex items-center platform-card-header">
          <div class="platform-card-icon" aria-hidden="true">
            <span class="platform-card-icon-text">{computedShortName.toUpperCase()}</span>
          </div>
          <div>
            <h2 class="platform-card-title">{name}</h2>
            <p class="platform-card-description">{description}</p>
          </div>
        </div>
        <div class="flex flex-col platform-card-actions">
          <a
            href={downloadUrl}
            class="platform-card-button"
            class:opacity-50={!isAvailable}
            aria-label={`${name}をダウンロード`}
          >
            <span class="platform-card-button-text">
              {buttonLabel} {sizeDisplay}
            </span>
          </a>
        </div>
      </>
    )}
  </div>
</article>

<style>
  .platform-card {
    box-sizing: border-box;
  }

  .platform-card-coming-soon {
    opacity: 0.5;
  }

  .platform-card-icon-large {
    font-size: 32px;
    align-self: flex-start;
  }

  .platform-card-title {
    color: var(--color-text-primary);
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
    font-size: 20px;
    font-weight: 600;
    margin: 0;
    text-align: left;
  }

  .platform-card-coming-soon-text {
    color: var(--color-text-secondary);
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
    font-size: 14px;
    font-weight: normal;
    margin: 0;
    text-align: left;
  }

  .platform-card-header {
    gap: 12px;
    align-items: flex-start;
  }

  .platform-card-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background-color: var(--color-text-primary);
    border-radius: var(--radius-md);
    flex-shrink: 0;
  }

  .platform-card-icon-text {
    color: var(--color-bg-dark);
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
    font-size: 12px;
    font-weight: 700;
  }

  .platform-card-description {
    color: var(--color-text-secondary);
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
    font-size: 14px;
    font-weight: normal;
    margin: 0;
  }

  .platform-card-actions {
    gap: 8px;
  }

  .platform-card-button {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 44px;
    width: 100%;
    background-color: var(--color-text-primary);
    border-radius: var(--radius-pill);
    text-decoration: none;
    transition: opacity 0.2s ease;
  }

  .platform-card-button-text {
    color: var(--color-bg-dark);
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
    font-size: 14px;
    font-weight: 600;
  }
</style>
